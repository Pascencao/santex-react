{"ast":null,"code":"export default function useStateWithStorage(key, defaultValue) {\n  const addProduct = item => {\n    const cart = JSON.parse(localStorage.getItem(key) || defaultValue);\n    const exist = cart.findIndex(cartItem => cartItem.variant_id === item.variant_id) > -1;\n\n    if (exist) {\n      cart.map(cartItem => {\n        if (cartItem.variant_id === item.variant_id) {\n          cartItem.quantity = cartItem.quantity + item.quantity;\n        }\n\n        return cartItem;\n      });\n    } else {\n      cart.push(item);\n    }\n\n    localStorage.setItem(key, JSON.stringify(cart));\n  };\n\n  return {\n    addProduct\n  };\n}","map":{"version":3,"sources":["/Users/pabloascencao/Documents/Codigo/santex-react/src/hooks/useStateWithStorage.tsx"],"names":["useStateWithStorage","key","defaultValue","addProduct","item","cart","JSON","parse","localStorage","getItem","exist","findIndex","cartItem","variant_id","map","quantity","push","setItem","stringify"],"mappings":"AAOA,eAAe,SAASA,mBAAT,CACbC,GADa,EAEbC,YAFa,EAGb;AACA,QAAMC,UAAU,GAAIC,IAAD,IAAoB;AACrC,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBR,GAArB,KAA2BC,YAAtC,CAAb;AACA,UAAMQ,KAAK,GAAGL,IAAI,CAACM,SAAL,CAAgBC,QAAD,IAA0BA,QAAQ,CAACC,UAAT,KAAwBT,IAAI,CAACS,UAAtE,IAAoF,CAAC,CAAnG;;AACA,QAAGH,KAAH,EAAS;AACPL,MAAAA,IAAI,CAACS,GAAL,CAAUF,QAAD,IAA0B;AACjC,YAAGA,QAAQ,CAACC,UAAT,KAAwBT,IAAI,CAACS,UAAhC,EAA2C;AACzCD,UAAAA,QAAQ,CAACG,QAAT,GAAmBH,QAAQ,CAACG,QAAT,GAAmBX,IAAI,CAACW,QAA3C;AACD;;AACD,eAAOH,QAAP;AACD,OALD;AAMD,KAPD,MAOO;AACLP,MAAAA,IAAI,CAACW,IAAL,CAAUZ,IAAV;AACD;;AACDI,IAAAA,YAAY,CAACS,OAAb,CAAqBhB,GAArB,EAA0BK,IAAI,CAACY,SAAL,CAAeb,IAAf,CAA1B;AACD,GAdD;;AAeA,SAAO;AACLF,IAAAA;AADK,GAAP;AAGD","sourcesContent":["interface ProductItem{\n  name: string;\n  price: number;\n  quantity: number;\n  variant_id: string;\n  variant_name: string;\n}\nexport default function useStateWithStorage(\n  key: string,\n  defaultValue: unknown\n) {\n  const addProduct = (item:ProductItem)=>{\n    const cart = JSON.parse(localStorage.getItem(key)||defaultValue);\n    const exist = cart.findIndex((cartItem:ProductItem) => cartItem.variant_id === item.variant_id) > -1;\n    if(exist){\n      cart.map((cartItem:ProductItem) => {\n        if(cartItem.variant_id === item.variant_id){\n          cartItem.quantity =cartItem.quantity+ item.quantity;\n        }\n        return cartItem\n      })\n    } else {\n      cart.push(item)\n    }\n    localStorage.setItem(key, JSON.stringify(cart))\n  }\n  return {\n    addProduct\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}