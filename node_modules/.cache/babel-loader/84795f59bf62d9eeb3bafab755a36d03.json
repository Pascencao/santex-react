{"ast":null,"code":"var _jsxFileName = \"/Users/pabloascencao/Documents/Codigo/santex-react/src/components/ProductItem.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Card, CardActions, CardContent, CardMedia, MenuItem, Select, Typography } from \"@mui/material\";\nimport { useContext, useState } from \"react\";\nimport { Currency } from \"./currency\";\nimport { useAddItem } from \"../hooks/addItem\";\nimport { CartContext } from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProductItem = ({\n  item,\n  index\n}) => {\n  _s();\n\n  var _item$description;\n\n  const {\n    cart,\n    setCart\n  } = useContext(CartContext);\n  const {\n    addItem\n  } = useAddItem();\n  const [selectedItem, setSelectedItem] = useState(item.variants[0]);\n\n  const handleChange = e => {\n    var _item$variants;\n\n    const choice = (_item$variants = item.variants) === null || _item$variants === void 0 ? void 0 : _item$variants.find(v => v.id === e.target.value);\n    setSelectedItem(choice || item.variants[0]);\n  };\n\n  const addToCart = () => {\n    addItem({\n      variables: {\n        id: selectedItem.id,\n        q: 1\n      }\n    });\n    const exist = cart.findIndex(cartItem => cartItem.variant_id === item.variant_id) > -1;\n\n    if (exist) {\n      cart.map(cartItem => {\n        if (cartItem.variant_id === item.variant_id) {\n          cartItem.quantity = cartItem.quantity + item.quantity;\n        }\n\n        return cartItem;\n      });\n    } else {\n      cart.push(item);\n    }\n\n    setCart();\n    addProduct({\n      name: item.name,\n      price: selectedItem.price,\n      quantity: 1,\n      variant_id: selectedItem.id,\n      variant_name: selectedItem.name\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      maxWidth: 345\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n      component: \"img\",\n      alt: \"product image\",\n      height: \"140\",\n      image: item.assets[0].source\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        gutterBottom: true,\n        variant: \"h6\",\n        component: \"div\",\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: (_item$description = item.description) === null || _item$description === void 0 ? void 0 : _item$description.substring(0, 100)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), item.variants.length > 1 ? /*#__PURE__*/_jsxDEV(Select, {\n        onChange: handleChange,\n        size: \"small\",\n        value: selectedItem.id,\n        children: item.variants.map(opt => /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: opt.sku,\n          children: [opt.id, \" \", /*#__PURE__*/_jsxDEV(Currency, {\n            value: opt.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 71\n          }, this)]\n        }, opt.sku, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 22\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: [selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.id, \" \", /*#__PURE__*/_jsxDEV(Currency, {\n          value: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        onClick: addToCart,\n        children: \"Buy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 13\n  }, this);\n};\n\n_s(ProductItem, \"h+ydVzO77zUWQM/zg/SeFgA7r1Y=\", false, function () {\n  return [useAddItem];\n});\n\n_c = ProductItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductItem\");","map":{"version":3,"sources":["/Users/pabloascencao/Documents/Codigo/santex-react/src/components/ProductItem.tsx"],"names":["Button","Card","CardActions","CardContent","CardMedia","MenuItem","Select","Typography","useContext","useState","Currency","useAddItem","CartContext","ProductItem","item","index","cart","setCart","addItem","selectedItem","setSelectedItem","variants","handleChange","e","choice","find","v","id","target","value","addToCart","variables","q","exist","findIndex","cartItem","variant_id","map","quantity","push","addProduct","name","price","variant_name","maxWidth","assets","source","description","substring","length","opt","sku"],"mappings":"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","sourcesContent":["import { Button, Card, CardActions, CardContent, CardMedia, MenuItem, Select, SelectChangeEvent, Typography } from \"@mui/material\"\nimport { useContext, useState } from \"react\";\nimport { IProduct, IVariants } from \"../models/products\";\nimport { Currency } from \"./currency\";\nimport { useAddItem } from \"../hooks/addItem\";\nimport { CartContext } from \"../App\";\ninterface ProductItem{\n    name: string;\n    price: number;\n    quantity: number;\n    variant_id: string;\n    variant_name: string;\n  }\nexport const ProductItem = ({item, index}: {item: IProduct, index: number})=>{\n    const {cart, setCart} = useContext(CartContext)\n    const {addItem} = useAddItem()\n    const [selectedItem, setSelectedItem] = useState(item.variants[0]);\n    const handleChange = (e: SelectChangeEvent)=>{\n        const choice = item.variants?.find((v:IVariants)=>v.id === e.target.value );\n        setSelectedItem(choice || item.variants[0])\n    }\n    const addToCart = ()=>{\n        addItem({variables:{id: selectedItem.id, q: 1}})\n        const exist = cart.findIndex((cartItem:ProductItem) => cartItem.variant_id === item.variant_id) > -1;\n        if(exist){\n        cart.map((cartItem:ProductItem) => {\n            if(cartItem.variant_id === item.variant_id){\n            cartItem.quantity =cartItem.quantity+ item.quantity;\n            }\n            return cartItem\n        })\n        } else {\n        cart.push(item)\n        }\n        setCart()\n        addProduct({\n            name: item.name,\n            price: selectedItem.price,\n            quantity: 1,\n            variant_id: selectedItem.id,\n            variant_name: selectedItem.name\n        })\n    }\n    return (<Card sx={{ maxWidth: 345 }} key={index}>\n        <CardMedia\n          component=\"img\"\n          alt=\"product image\"\n          height=\"140\"\n          image={item.assets[0].source}\n        />\n        <CardContent>\n          <Typography gutterBottom variant=\"h6\" component=\"div\">\n          {item.name}\n          </Typography>\n          <Typography variant=\"body2\">\n          {item.description?.substring(0,100)}\n          </Typography>\n          {item.variants.length > 1 ? \n            <Select onChange={handleChange} size=\"small\" value={selectedItem.id}>\n                {item.variants.map((opt:IVariants)=>(\n                     <MenuItem key={opt.sku} value={opt.sku}>{opt.id} <Currency value={opt.price} /></MenuItem>\n                ))}\n            </Select>\n            : \n            <Typography variant=\"body2\">\n            {selectedItem?.id} <Currency value={selectedItem?.price} />\n            </Typography>\n          }\n        </CardContent>\n        <CardActions>\n          <Button size=\"small\" onClick={addToCart}>Buy</Button>\n        </CardActions>\n      </Card>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}