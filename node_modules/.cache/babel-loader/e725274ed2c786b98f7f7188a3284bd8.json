{"ast":null,"code":"export default function useStateWithStorage() {\n  const addProduct = item => {\n    const cart = JSON.parse(localStorage.getItem('cart') || '{}');\n    const exist = cart.findIndex(cartItem => cartItem.variant_id = item.variant_id) > -1;\n\n    if (exist) {\n      cart.map(cartItem => {\n        if (cartItem.variant_id = item.variant_id) {\n          cartItem.quantity = cartItem.quantity + item.quantity;\n        }\n\n        return cartItem;\n      });\n    } else {\n      cart.push(item);\n    }\n\n    localStorage.setItem('cart', JSON.stringify({}));\n  };\n\n  return {\n    addProduct\n  };\n}","map":{"version":3,"sources":["/Users/pabloascencao/Documents/Codigo/santex-react/src/hooks/useStateWithStorage.tsx"],"names":["useStateWithStorage","addProduct","item","cart","JSON","parse","localStorage","getItem","exist","findIndex","cartItem","variant_id","map","quantity","push","setItem","stringify"],"mappings":"AAOA,eAAe,SAASA,mBAAT,GAA+B;AAC5C,QAAMC,UAAU,GAAIC,IAAD,IAAoB;AACrC,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,KAA8B,IAAzC,CAAb;AACA,UAAMC,KAAK,GAAGL,IAAI,CAACM,SAAL,CAAgBC,QAAD,IAA0BA,QAAQ,CAACC,UAAT,GAAsBT,IAAI,CAACS,UAApE,IAAkF,CAAC,CAAjG;;AACA,QAAGH,KAAH,EAAS;AACPL,MAAAA,IAAI,CAACS,GAAL,CAAUF,QAAD,IAA0B;AACjC,YAAGA,QAAQ,CAACC,UAAT,GAAsBT,IAAI,CAACS,UAA9B,EAAyC;AACvCD,UAAAA,QAAQ,CAACG,QAAT,GAAmBH,QAAQ,CAACG,QAAT,GAAmBX,IAAI,CAACW,QAA3C;AACD;;AACD,eAAOH,QAAP;AACD,OALD;AAMD,KAPD,MAOO;AACLP,MAAAA,IAAI,CAACW,IAAL,CAAUZ,IAAV;AACD;;AACDI,IAAAA,YAAY,CAACS,OAAb,CAAqB,MAArB,EAA6BX,IAAI,CAACY,SAAL,CAAe,EAAf,CAA7B;AACD,GAdD;;AAeA,SAAO;AACLf,IAAAA;AADK,GAAP;AAGD","sourcesContent":["interface ProductItem{\n  name: string;\n  price: number;\n  quantity: number;\n  variant_id: string;\n  variant_name: string;\n}\nexport default function useStateWithStorage() {\n  const addProduct = (item:ProductItem)=>{\n    const cart = JSON.parse(localStorage.getItem('cart')||'{}');\n    const exist = cart.findIndex((cartItem:ProductItem) => cartItem.variant_id = item.variant_id) > -1;\n    if(exist){\n      cart.map((cartItem:ProductItem) => {\n        if(cartItem.variant_id = item.variant_id){\n          cartItem.quantity =cartItem.quantity+ item.quantity;\n        }\n        return cartItem\n      })\n    } else {\n      cart.push(item)\n    }\n    localStorage.setItem('cart', JSON.stringify({}))\n  }\n  return {\n    addProduct\n  }\n}\n"]},"metadata":{},"sourceType":"module"}